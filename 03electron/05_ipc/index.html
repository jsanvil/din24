
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../04_forms/">
      
      
        <link rel="next" href="../06_bs_layout/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>3.5 Comunicaci贸n entre procesos - Desarrollo de Interfaces 2024/25</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/bs5_layout.css">
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#35-comunicacion-entre-procesos" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Desarrollo de Interfaces 2024/25" class="md-header__button md-logo" aria-label="Desarrollo de Interfaces 2024/25" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo de Interfaces 2024/25
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.5 Comunicaci贸n entre procesos
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B煤squeda" placeholder="B煤squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b煤squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pesta帽as" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Inicio

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../00intro/01_electron_intro/" class="md-tabs__link">
          
  
  0 Intro

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../01js/" class="md-tabs__link">
          
  
  UD 1 JS

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../02nodejs/" class="md-tabs__link">
          
  
  UD 2 Node.js

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  UD 3 Electron

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../04electron_react/" class="md-tabs__link">
          
  
  UD 4 React

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../05electron_db/" class="md-tabs__link">
          
  
  UD 5 Gesti贸n de datos

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../proyectos/01_watchlist/" class="md-tabs__link">
          
  
  Proyectos

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegaci贸n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo de Interfaces 2024/25" class="md-nav__button md-logo" aria-label="Desarrollo de Interfaces 2024/25" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Desarrollo de Interfaces 2024/25
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Inicio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desarrollo de Interfaces 2024/25
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entorno/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
     Entorno de trabajo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    0 Intro
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            0 Intro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00intro/01_electron_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.1 Introducci贸n a Electron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00intro/02_electron_firstapp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.2 Creando la primera aplicaci贸n en Electron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00intro/021_actividad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.2.1 Actividad
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00intro/03_intro_interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0.3 Introducci贸n a la interfaz de usuario
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 1 JS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            UD 1 JS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/01_sintaxis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 Sintaxis b谩sica de Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/02_funciones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 Funciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/03_objetos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 Objetos { }
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/04_arrays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4 Arrays [ ]
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/05_callbacks_promesas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5 Callbacks y promesas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/06_poo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6 Programaci贸n Orientada a Objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/011_actividades/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 Actividades: sintaxis b谩sica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/061_actividades/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 Actividades: Programaci贸n as铆ncrona y orientada a objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01js/062_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 Ejercicio de refuerzo sobre programaci贸n as铆ncrona y orientada a objetos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 2 Node.js
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            UD 2 Node.js
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02nodejs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 NodeJS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02nodejs/01_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 M贸dulos en Node.js
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02nodejs/02_events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2 Eventos en Node.js
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02nodejs/03_servers_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3 Servidores y ficheros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02nodejs/ud2act01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD2 - Actividad 1: M贸dulos y eventos en Node.js
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    UD 3 Electron
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            UD 3 Electron
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Electron b谩sico
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 Introducci贸n a Electron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_dom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 Document Object Model (DOM)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3 Eventos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_forms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4 Formularios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3.5 Comunicaci贸n entre procesos
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3.5 Comunicaci贸n entre procesos
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#por-que-no-un-solo-proceso" class="md-nav__link">
    <span class="md-ellipsis">
      驴Por qu茅 no un solo proceso?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-modelo-multi-proceso" class="md-nav__link">
    <span class="md-ellipsis">
      El modelo multi proceso
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-proceso-principal" class="md-nav__link">
    <span class="md-ellipsis">
      El proceso principal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="El proceso principal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gestion-de-ventanas" class="md-nav__link">
    <span class="md-ellipsis">
      Gesti贸n de ventanas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ciclo-de-vida-de-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Ciclo de vida de la aplicaci贸n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aplicaciones-nativas" class="md-nav__link">
    <span class="md-ellipsis">
      Aplicaciones nativas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-proceso-de-renderizado" class="md-nav__link">
    <span class="md-ellipsis">
      El proceso de renderizado
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts-de-precarga" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts de precarga
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comunicacion-entre-procesos" class="md-nav__link">
    <span class="md-ellipsis">
      Comunicaci贸n entre procesos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comunicaci贸n entre procesos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canales-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Canales IPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-1-renderizador-a-principal-unidireccional" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 1: Renderizador a principal (unidireccional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-2-renderizador-a-principal-bidireccional" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 2: Renderizador a principal (bidireccional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-3-principal-a-renderizador" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 3: Principal a renderizador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-4-renderizador-a-renderizador" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 4: Renderizador a renderizador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializacion-de-objetos" class="md-nav__link">
    <span class="md-ellipsis">
      Serializaci贸n de objetos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_bs_layout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.6 Maquetaci贸n en Bootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_bs_elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.7 Elemento b谩sicos de Bootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud3_act1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD3 - Actividad 1: Document Object Model (DOM)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ud3_act2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD3 - Actividad 2: Eventos y formularios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 4 React
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            UD 4 React
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Electron avanzado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/01_intro_react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1 Introducci贸n a React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/02_electron_vite_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2 Integraci贸n de React en Electron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/03_react_events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3 Eventos React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/04_react_state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4 Reaccionando a cambios de estado con useState
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/05_react_effect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.5 Responder a cambios externos con useEffect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/06_react_router_redux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.6 Estado global y rutas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/ud4_act1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD4 - Actividad 1: Introducci贸n a React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/ud4_act2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD4 - Actividad 2: Estados y efectos en React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04electron_react/ud4_act3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锔 UD4 - Actividad 3: Rutas y estado global
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 5 Gesti贸n de datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            UD 5 Gesti贸n de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05electron_db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Aplicaciones Electron con Base de Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05electron_db/01_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1 Arquitectura de datos y servicios en una aplicaci贸n Electron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05electron_db/02_apirest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.2 API REST
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proyectos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Proyectos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../proyectos/01_watchlist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proyecto 1 - Lista de seguimiento
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../proyectos/02_events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proyecto 2 - Gesti贸n de eventos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#por-que-no-un-solo-proceso" class="md-nav__link">
    <span class="md-ellipsis">
      驴Por qu茅 no un solo proceso?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-modelo-multi-proceso" class="md-nav__link">
    <span class="md-ellipsis">
      El modelo multi proceso
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-proceso-principal" class="md-nav__link">
    <span class="md-ellipsis">
      El proceso principal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="El proceso principal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gestion-de-ventanas" class="md-nav__link">
    <span class="md-ellipsis">
      Gesti贸n de ventanas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ciclo-de-vida-de-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Ciclo de vida de la aplicaci贸n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aplicaciones-nativas" class="md-nav__link">
    <span class="md-ellipsis">
      Aplicaciones nativas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-proceso-de-renderizado" class="md-nav__link">
    <span class="md-ellipsis">
      El proceso de renderizado
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts-de-precarga" class="md-nav__link">
    <span class="md-ellipsis">
      Scripts de precarga
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comunicacion-entre-procesos" class="md-nav__link">
    <span class="md-ellipsis">
      Comunicaci贸n entre procesos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comunicaci贸n entre procesos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canales-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Canales IPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-1-renderizador-a-principal-unidireccional" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 1: Renderizador a principal (unidireccional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-2-renderizador-a-principal-bidireccional" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 2: Renderizador a principal (bidireccional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-3-principal-a-renderizador" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 3: Principal a renderizador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patron-4-renderizador-a-renderizador" class="md-nav__link">
    <span class="md-ellipsis">
      Patr贸n 4: Renderizador a renderizador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializacion-de-objetos" class="md-nav__link">
    <span class="md-ellipsis">
      Serializaci贸n de objetos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="35-comunicacion-entre-procesos">3.5 Comunicaci贸n entre procesos<a class="headerlink" href="#35-comunicacion-entre-procesos" title="Permanent link">&para;</a></h1>
<p><em>Electron</em> hereda su <strong>arquitectura multiproceso de <em>Chromium</em></strong>, lo que hace que el marco sea muy similar a un navegador web moderno.</p>
<h2 id="por-que-no-un-solo-proceso">驴Por qu茅 no un solo proceso?<a class="headerlink" href="#por-que-no-un-solo-proceso" title="Permanent link">&para;</a></h2>
<p>Los navegadores web son aplicaciones incre铆blemente complicadas. Aparte de su capacidad principal para mostrar contenido web, tienen muchas responsabilidades secundarias, como administrar m煤ltiples ventanas (o pesta帽as) y cargar extensiones de terceros.</p>
<p>Anteriormente, los navegadores sol铆an utilizar un 煤nico proceso para toda esta funcionalidad. Aunque este patr贸n significaba menos sobrecarga para cada pesta帽a abierta, tambi茅n significaba que un sitio web que fallaba o se bloqueaba afectar铆a a todo el navegador.</p>
<h2 id="el-modelo-multi-proceso">El modelo multi proceso<a class="headerlink" href="#el-modelo-multi-proceso" title="Permanent link">&para;</a></h2>
<p>Para resolver este problema, el equipo de <em>Chromium</em> decidi贸 que cada pesta帽a se mostrar铆a en su propio proceso, limitando el da帽o que un c贸digo malicioso o con errores podr铆a causar a la aplicaci贸n en su conjunto. Un 煤nico proceso del navegador controla estos procesos, as铆 como el ciclo de vida de la aplicaci贸n en su conjunto. El diagrama de <a href="https://www.google.com/googlebooks/chrome/med_04.html"><em>Chrome Comic</em></a> visualiza este modelo.</p>
<p>Las aplicaciones <em>Electron</em> est谩n estructuradas de manera muy similar. El desarrollador controla dos tipos de procesos: <a href="#el-proceso-principal"><strong>principal</strong></a> (<em>main process</em>) y <a href="#el-proceso-de-renderizado"><strong>renderizado</strong></a> (<em>renderer process</em>).</p>
<figure>
    <img alt="Arquitectura detallada en Electron" src="../assets/react_process.png" width="95%" />
    <figcaption>Arquitectura detallada en Electron</figcaption>
</figure>
<h2 id="el-proceso-principal">El proceso principal<a class="headerlink" href="#el-proceso-principal" title="Permanent link">&para;</a></h2>
<p>Cada aplicaci贸n de <em>Electron</em> tiene <strong>un 煤nico proceso principal</strong>, que act煤a como punto de entrada de la aplicaci贸n. El proceso principal <strong>se ejecuta en un entorno <em>Node.js</em></strong>, lo que significa que tiene la capacidad de requerir m贸dulos y utilizar todas las API de <em>Node.js</em>.</p>
<h3 id="gestion-de-ventanas">Gesti贸n de ventanas<a class="headerlink" href="#gestion-de-ventanas" title="Permanent link">&para;</a></h3>
<p>El prop贸sito principal del proceso principal es <strong>crear y administrar ventanas</strong> de aplicaciones con el m贸dulo <strong><code>BrowserWindow</code></strong>.</p>
<p>Cada instancia de la clase <code>BrowserWindow</code> crea una ventana de aplicaci贸n que carga una p谩gina web en un <strong>proceso de renderizado independiente</strong>. Se puede interactuar con este contenido web desde el proceso principal utilizando el objeto <strong><code>webContents</code></strong> de la ventana.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">main.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">win</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">800</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="mf">1500</span><span class="w"> </span><span class="p">})</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nx">win</span><span class="p">.</span><span class="nx">loadURL</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">win</span><span class="p">.</span><span class="nx">webContents</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">contents</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Nota:</p>
<p>Tambi茅n se crea un proceso de renderizado para webs incrustadas como el m贸dulo <code>BrowserView</code>. El objeto <code>webContents</code> tambi茅n es accesible para contenido web incrustado.</p>
</div>
<p>Debido a que el m贸dulo <code>BrowserWindow</code> es un <code>EventEmitter</code>, tambi茅n puede agregar controladores para varios eventos de usuario (<em>por ejemplo, minimizar o maximizar la ventana</em>).</p>
<p>Cuando una instancia de <code>BrowserWindow</code> se destruye, su proceso de renderizado tambi茅n finaliza.</p>
<h3 id="ciclo-de-vida-de-la-aplicacion">Ciclo de vida de la aplicaci贸n<a class="headerlink" href="#ciclo-de-vida-de-la-aplicacion" title="Permanent link">&para;</a></h3>
<p>El proceso principal tambi茅n controla el ciclo de vida de su aplicaci贸n a trav茅s del <strong>m贸dulo <code>app</code></strong> de <em>Electron</em>. Este m贸dulo proporciona un gran conjunto de eventos y m茅todos que se pueden utilizar para agregar un comportamiento personalizado de la aplicaci贸n (<em>por ejemplo</em>, cerrar la aplicaci贸n mediante c贸digo, modificar el <em>dock</em> de la aplicaci贸n o mostrar un panel <em>'Acerca de'</em>).</p>
<p>Como ejemplo pr谩ctico, la aplicaci贸n que se muestra en la gu铆a de inicio r谩pido utiliza <code>app</code> para crear una experiencia de ventana de aplicaci贸n m谩s nativa.</p>
<div class="highlight"><span class="filename">main.js</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// cerrando la aplicaci贸n cuando no queden ventanas abiertas en plataformas no macOS</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;darwin&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">})</span>
</code></pre></div>
<h3 id="aplicaciones-nativas">Aplicaciones nativas<a class="headerlink" href="#aplicaciones-nativas" title="Permanent link">&para;</a></h3>
<p>Para ampliar las funciones de <em>Electron</em> m谩s all谩 de ser un contenedor de <em>Chromium</em> con contenidos web, el proceso principal tambi茅n agrega API personalizadas para interactuar con el sistema operativo del usuario. <em>Electron</em> expone varios m贸dulos que controlan la funcionalidad nativa del escritorio, como men煤s, cuadros de di谩logo e 铆conos de bandeja del sistema.</p>
<p>Para obtener una lista completa de los principales m贸dulos de proceso de <em>Electron</em>, se puede consultar la <a href="https://www.electronjs.org/docs/latest/api/app">documentaci贸n API</a>.</p>
<h2 id="el-proceso-de-renderizado">El proceso de renderizado<a class="headerlink" href="#el-proceso-de-renderizado" title="Permanent link">&para;</a></h2>
<p>Cada aplicaci贸n de <em>Electron</em> genera <strong>un proceso de renderizado independiente para cada <code>BrowserWindow</code></strong> (y cada web embebida). Un renderizador es responsable de representar contenido web. A todos los efectos, el c贸digo ejecutado en los procesos de renderizado debe comportarse de acuerdo con los est谩ndares web.</p>
<p>Por lo tanto, todas las interfaces de usuario y las funciones de las aplicaciones dentro de una 煤nica ventana del navegador deben escribirse con las mismas herramientas y paradigmas que utiliza en la web.</p>
<p>Lo m铆nimo que debe comprender es:</p>
<ul>
<li>Un archivo HTML es su punto de entrada para el proceso de renderizado.</li>
<li>Se puede agregar c贸digo <em>JavaScript</em> para la interactividad.</li>
<li>El estilo de la interfaz de usuario se agrega mediante hojas de estilo en cascada (CSS).</li>
</ul>
<p>Adem谩s, esto tambi茅n significa que <strong>el renderizador no tiene acceso directo a <code>require</code></strong> o otras API de <em>Node.js</em>.</p>
<div class="admonition warning">
<p class="admonition-title">ATENCIN</p>
<p>Los procesos de renderizado se pueden generar con un entorno <em>Node.js</em> completo para facilitar el desarrollo. Hist贸ricamente, esta sol铆a ser la opci贸n predeterminada, pero esta funci贸n estaba deshabilitada por razones de seguridad.</p>
</div>
<p>Pero entonces, 驴c贸mo las interfaces de usuario del proceso de renderizado pueden interactuar con <em>Node.js</em> y la funcionalidad de escritorio nativa de <em>Electron</em> si solo se puede acceder a estas funciones desde el proceso principal?. De hecho, no existe una forma directa de importar los <em>scripts</em> de contenido de <em>Electron</em>.</p>
<h2 id="scripts-de-precarga">Scripts de precarga<a class="headerlink" href="#scripts-de-precarga" title="Permanent link">&para;</a></h2>
<p>Los <em>scripts</em> de precarga contienen c贸digo que se ejecuta en un proceso de renderizado antes de que su contenido web comience a cargarse. Estos scripts se ejecutan dentro del contexto del renderizador, pero se les otorgan m谩s privilegios al tener acceso a las API de <em>Node.js</em>.</p>
<p>Se puede adjuntar un <em>script</em> de precarga al proceso principal en el constructor <code>BrowserWindow</code> en la opci贸n <strong><code>webPreferences</code></strong>.</p>
<div class="highlight"><span class="filename">main.js</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">// ...</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">win</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="hll"><span class="w">  </span><span class="nx">webPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="hll"><span class="w">    </span><span class="nx">preload</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;path/to/preload.js&#39;</span>
</span><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">})</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c1">// ...</span>
</code></pre></div>
<p>Debido a que el script de precarga comparte una interfaz <code>Window</code> global con los renderizadores y puede acceder a las API de <em>Node.js</em>, sirve para mejorar su renderizador al exponer API arbitrarias en el <code>window</code> global que luego puede consumir su contenido web.</p>
<p>Aunque los scripts de precarga comparten un <code>window</code> global con el renderizador al que est谩n adjuntos, no puede adjuntar directamente ninguna variable desde el script de precarga a <code>window</code> debido al valor predeterminado de <strong><code>contextIsolation</code></strong>.</p>
<p>En el siguiente ejemplo, se intenta adjuntar una variable <code>myAPI</code> al <code>window</code> global desde el script de precarga, pero no se puede acceder a ella desde el script de renderizado:</p>
<div class="highlight"><span class="filename">preload.js</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">window</span><span class="p">.</span><span class="nx">myAPI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nx">desktop</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">renderer.js</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">myAPI</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1">// =&gt; undefined</span>
</code></pre></div>
<p>El aislamiento de contexto significa que los scripts de precarga est谩n aislados del 谩mbito principal del renderizador para evitar la filtraci贸n de API privilegiadas en el c贸digo del contenido web.</p>
<p>En su lugar, se utiliza el m贸dulo <code>contextBridge</code> para lograr esto de forma segura:</p>
<div class="highlight"><span class="filename">preload.js</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">&#39;myAPI&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nx">desktop</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">})</span>
</code></pre></div>
<div class="highlight"><span class="filename">renderer.js</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">myAPI</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">// =&gt; { desktop: true }</span>
</code></pre></div>
<p>Esta caracter铆stica es incre铆blemente 煤til para dos prop贸sitos principales:</p>
<ul>
<li>Al <strong>exponer las funciones</strong> de <strong><code>ipcRenderer</code></strong> al renderizador, puede utilizar la comunicaci贸n entre procesos (IPC) para activar las tareas principales del proceso desde el renderizador (y viceversa).</li>
<li>Si se est谩 desarrollando una aplicaci贸n de <em>Electron</em> para una aplicaci贸n web existente alojada en una URL remota, se pueden <strong>agregar propiedades personalizadas al <code>window</code></strong> global del renderizador que se pueden usar para la l贸gica del escritorio en el lado del cliente.</li>
</ul>
<h2 id="comunicacion-entre-procesos">Comunicaci贸n entre procesos<a class="headerlink" href="#comunicacion-entre-procesos" title="Permanent link">&para;</a></h2>
<p>La comunicaci贸n entre procesos (IPC <em>Inter Process Communication</em>) es una parte clave de la creaci贸n de aplicaciones de escritorio. Debido a que los procesos principal y de renderizado tienen diferentes responsabilidades, IPC es la 煤nica forma de realizar muchas tareas, como llamar a una API nativa desde su interfaz de usuario o activar cambios en su contenido web desde men煤s nativos.</p>
<h3 id="canales-ipc">Canales IPC<a class="headerlink" href="#canales-ipc" title="Permanent link">&para;</a></h3>
<p>Los procesos se comunican pasando mensajes a trav茅s de "canales" definidos por el desarrollador con los m贸dulos <strong><code>ipcMain</code></strong> y <strong><code>ipcRenderer</code></strong>. Estos canales son <strong>arbitrarios</strong> (podemos nombrarlos como queramos) y <strong>bidireccionales</strong> (podemos usar el mismo nombre de canal para ambos m贸dulos).</p>
<p>Repasaremos algunos patrones IPC fundamentales con ejemplos concretos que podemos usar como referencia para el c贸digo de una aplicaci贸n.</p>
<h3 id="patron-1-renderizador-a-principal-unidireccional">Patr贸n 1: Renderizador a principal (unidireccional)<a class="headerlink" href="#patron-1-renderizador-a-principal-unidireccional" title="Permanent link">&para;</a></h3>
<p>Para enviar un mensaje IPC unidireccional desde un proceso de renderizador al proceso principal, se puede usar <strong><code>ipcRenderer.send</code></strong> para enviar un mensaje que captura en <strong><code>ipcMain.on</code></strong>.</p>
<p>Normalmente se utiliza este patr贸n para activar una acci贸n en el proceso principal, como guardar un archivo o mostrar un cuadro de di谩logo, desde una acci贸n del usuario en el renderizador.</p>
<p>Para demostrar este patr贸n, se crea una aplicaci贸n que utiliza IPC para actualizar el t铆tulo de la ventana de la aplicaci贸n desde el proceso de renderizado.</p>
<h4 id="1-escuchar-eventos-con-ipcmainon">1. Escuchar eventos con <code>ipcMain.on</code><a class="headerlink" href="#1-escuchar-eventos-con-ipcmainon" title="Permanent link">&para;</a></h4>
<p>En el proceso principal, se crea un <em>listener</em> para el evento '<code>set-title</code>' con <code>ipcMain.on</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">main.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcMain</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
</span><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node:path&#39;</span><span class="p">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mainWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="nx">webPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">      </span><span class="nx">preload</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;preload.js&#39;</span><span class="p">)</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">  </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="p">}</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="hll"><span class="kd">function</span><span class="w"> </span><span class="nx">handleSetTitle</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">webContents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">sender</span>
</span><a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">win</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">.</span><span class="nx">fromWebContents</span><span class="p">(</span><span class="nx">webContents</span><span class="p">)</span>
</span><a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="hll"><span class="w">  </span><span class="nx">win</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span>
</span><a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-7-19" name="__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="hll"><span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;set-title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">handleSetTitle</span><span class="p">)</span>
</span><a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="w">  </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="w">  </span><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">BrowserWindow</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">().</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="p">})</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;darwin&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><span class="filename">preload.js</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">&#39;electronAPI&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nx">setTitle</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">title</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;set-title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="p">})</span>
</code></pre></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.html</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Security-Policy&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Set windows title IPC!<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>l
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>Title:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="p">/&gt;</span>
</span><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;setTitle()&quot;</span><span class="p">&gt;</span>Set<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./renderer.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><a id="__codelineno-9-13" name="__codelineno-9-13"></a>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>La funci贸n <code>handleSetTitle</code> tiene dos par谩metros: un evento con estructura <a href="https://www.electronjs.org/docs/latest/api/structures/ipc-main-event"><code>IpcMainEvent</code></a> y una cadena de texto <code>title</code>. Cada vez que llega un evento <code>set-title</code>, esta funci贸n encontrar谩 la instancia de <code>BrowserWindow</code> adjunta al remitente del mensaje y utilizar谩 <code>win.setTitle</code> en ella.</p>
<h4 id="2-exponer-ipcrenderersend-en-el-script-preloadjs">2. Exponer <code>ipcRenderer.send</code> en el script <code>preload.js</code><a class="headerlink" href="#2-exponer-ipcrenderersend-en-el-script-preloadjs" title="Permanent link">&para;</a></h4>
<p>Para enviar mensajes al <em>listener</em> creado anteriormente, puede se usa <code>ipcRenderer.send</code>. Debemos elegir qu茅 API exponer desde el script de precarga utilizando <code>contextBridge</code>.</p>
<p>El script de precarga, expondr谩 el m茅todo <code>setTitle</code> en proceso de renderizado.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">preload.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">&#39;electronAPI&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="hll"><span class="w">  </span><span class="nx">setTitle</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">title</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;set-title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">)</span>
</span><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p>En este punto, el proceso de renderizado puede llamar a <code>window.electronAPI.setTitle</code> para enviar un mensaje IPC al proceso principal.</p>
<h4 id="3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario">3. Crear el proceso de renderizado en la interfaz de usuario<a class="headerlink" href="#3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario" title="Permanent link">&para;</a></h4>
<p>En el archivo HTML cargado en <code>BrowserWindows</code>, se a帽ade una interface b谩sica consistente en una entrada de texto y un bot贸n.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.html</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>    <span class="cm">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Security-Policy&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello IPC!<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="hll">    Title: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">/&gt;</span>
</span><a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>Set<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./renderer.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><a id="__codelineno-11-13" name="__codelineno-11-13"></a>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Para hacer los elementos interactivos, a帽adimos algunas l铆neas de c贸digo a <code>renderer.js</code>, que aprovecha la API expuesta por el script de precarga.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">renderer.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">setButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;btn&#39;</span><span class="p">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">titleInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="nx">setButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">titleInput</span><span class="p">.</span><span class="nx">value</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="hll"><span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span>
</span><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p>En este punto, se puede ejecutar la aplicaci贸n y probar el bot贸n. Al hacer clic en el bot贸n, se enviar谩 un mensaje IPC al proceso principal, que establecer谩 el t铆tulo de la ventana en el valor del campo de entrada.</p>
<h3 id="patron-2-renderizador-a-principal-bidireccional">Patr贸n 2: Renderizador a principal (bidireccional)<a class="headerlink" href="#patron-2-renderizador-a-principal-bidireccional" title="Permanent link">&para;</a></h3>
<p>Para enviar un mensaje IPC bidireccional entre dos procesos, se puede usar <code>ipcMain.handle</code> para crear un <em>listener</em> que devuelva un valor. Luego, se puede usar <code>ipcRenderer.invoke</code> para llamar a la funci贸n y obtener el valor devuelto.</p>
<p>Este patr贸n se puede utilizar para obtener informaci贸n del proceso principal, como el nombre de usuario del sistema operativo, desde el proceso principal.</p>
<p>Para demostrar este patr贸n, crearemos una aplicaci贸n que utiliza IPC para abrir un cuadro de di谩logo de sistema y devolver el archivo seleccionado al proceso de renderizado.</p>
<h4 id="1-crear-un-listener-con-ipcmainhandle">1. Crear un <em>listener</em> con <code>ipcMain.handle</code><a class="headerlink" href="#1-crear-un-listener-con-ipcmainhandle" title="Permanent link">&para;</a></h4>
<p>En el proceso principal, se crea la funci贸n <code>handleFileOpen()</code> que llama a <code>dialog.showOpenDialog</code> que muestr谩 un di谩logo y devuelve el primer archivo seleccionado. Esta funci贸n se utiliza como <em>listener</em> cuando un mensaje <code>ipcRenderer.invoke</code> se env铆a con el evento <code>dialog:openFile</code> que escucha <code>ipcMain.handle</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">main.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span>
<span class="normal"><a href="#__codelineno-13-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcMain</span><span class="p">,</span><span class="w"> </span><span class="nx">dialog</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
</span><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node:path&#39;</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="hll"><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleFileOpen</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">canceled</span><span class="p">,</span><span class="w"> </span><span class="nx">filePaths</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">dialog</span><span class="p">.</span><span class="nx">showOpenDialog</span><span class="p">()</span>
</span><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="hll"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">canceled</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">filePaths</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-13-10" name="__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mainWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="nx">webPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">      </span><span class="nx">preload</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;preload.js&#39;</span><span class="p">)</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">  </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="p">}</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="hll"><span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">handle</span><span class="p">(</span><span class="s1">&#39;dialog:openFile&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">handleFileOpen</span><span class="p">)</span>
</span><a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">  </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">  </span><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">BrowserWindow</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">().</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="p">})</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a>
<a id="__codelineno-13-28" name="__codelineno-13-28"></a><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-29" name="__codelineno-13-29"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;darwin&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
<a id="__codelineno-13-30" name="__codelineno-13-30"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<div class="admonition info">
<p class="admonition-title"><code>dialog:</code></p>
<p>El prefijo <code>dialog:</code> no tiene efecto en el c贸digo. Se utiliza para mejorar la legibilidad.</p>
</div>
<h4 id="2-exponer-ipcrendererinvoke-en-el-script-preloadjs">2. Exponer <code>ipcRenderer.invoke</code> en el script <code>preload.js</code><a class="headerlink" href="#2-exponer-ipcrendererinvoke-en-el-script-preloadjs" title="Permanent link">&para;</a></h4>
<p>Para llamar a la funci贸n creada anteriormente, se puede usar <code>ipcRenderer.invoke</code>. Debemos elegir qu茅 API exponer desde el script de precarga utilizando <code>contextBridge</code>.</p>
<p>El script de precarga, expondr谩 el m茅todo <code>openFile</code> en proceso de renderizado.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">preload.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">&#39;electronAPI&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="hll"><span class="w">  </span><span class="nx">openFile</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;dialog:openFile&#39;</span><span class="p">)</span>
</span><a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<h4 id="3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario_1">3. Crear el proceso de renderizado en la interfaz de usuario<a class="headerlink" href="#3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario_1" title="Permanent link">&para;</a></h4>
<p>Finalmente, screamos el HTML a cargar en <code>BrowserWindows</code>, que contiene un bot贸n que, al hacer clic, llamar谩 a <code>window.electronAPI.openFile</code> y mostrar谩 el resultado en un elemento <code>&lt;span&gt;</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.html</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>    <span class="cm">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Security-Policy&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Dialog<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;btn&quot;</span><span class="p">&gt;</span>Open a File<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="hll">    File path: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;filePath&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;./renderer.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><a id="__codelineno-15-13" name="__codelineno-15-13"></a>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>La interfaz consiste en un bot贸n que utilizaremos para enviar un mensaje IPC al proceso principal y un elemento <code>&lt;span&gt;</code> que utilizaremos para mostrar el resultado. Para hacer los elementos interactivos, a帽adimos algunas l铆neas de c贸digo a <code>renderer.js</code>, que aprovecha la API expuesta por el script de precarga.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">renderer.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span>
<span class="normal"><a href="#__codelineno-16-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">btn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;btn&#39;</span><span class="p">)</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">filePathElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;filePath&#39;</span><span class="p">)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="nx">btn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">openFile</span><span class="p">()</span>
</span><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="nx">filePathElement</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filePath</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p>En el c贸digo de arriba, se utiliza <code>await</code> para esperar el resultado de <code>window.electronAPI.openFile()</code> y luego se establece el resultado en el elemento <code>&lt;span&gt;</code>.</p>
<h3 id="patron-3-principal-a-renderizador">Patr贸n 3: Principal a renderizador<a class="headerlink" href="#patron-3-principal-a-renderizador" title="Permanent link">&para;</a></h3>
<p>Para enviar un mensaje desde el proceso principal a un proceso de renderizado, necesitamos especificar qu茅 ventana de renderizado recibir谩 el mensaje. Los mensajes se env铆an a trav茅s de <a href="https://www.electronjs.org/docs/latest/api/web-contents"><code>WebContents</code></a> que se pueden obtener de <code>BrowserWindow</code>. Esta instancia de <code>WebContents</code> contiene un m茅todo <a href="https://www.electronjs.org/docs/latest/api/web-contents#contentssendchannel-args"><code>send</code></a> que puede usarse del mismo modo que <code>ipcRenderer.send</code> en el proceso de renderizado.</p>
<p>Para demostrar este patr贸n, crearemos un contador de n煤meros controlado por el men煤 nativo del sistema operativo.</p>
<h4 id="1-enviar-mensajes-con-el-modulo-webcontents">1. Enviar mensajes con el m贸dulo <code>webContents</code><a class="headerlink" href="#1-enviar-mensajes-con-el-modulo-webcontents" title="Permanent link">&para;</a></h4>
<p>Para esta demo, necesitamos crear un men煤 personalizado en usando el m贸dulo <code>Menu</code> que usa <code>webContents.send</code> para enviar un mensaje IPC desde el proceso principal al proceso renderizador objetivo.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">main.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span>
<span class="normal"><a href="#__codelineno-17-36">36</a></span>
<span class="normal"><a href="#__codelineno-17-37">37</a></span>
<span class="normal"><a href="#__codelineno-17-38">38</a></span>
<span class="normal"><a href="#__codelineno-17-39">39</a></span>
<span class="normal"><a href="#__codelineno-17-40">40</a></span>
<span class="normal"><a href="#__codelineno-17-41">41</a></span>
<span class="normal"><a href="#__codelineno-17-42">42</a></span>
<span class="normal"><a href="#__codelineno-17-43">43</a></span>
<span class="normal"><a href="#__codelineno-17-44">44</a></span>
<span class="normal"><a href="#__codelineno-17-45">45</a></span>
<span class="normal"><a href="#__codelineno-17-46">46</a></span>
<span class="normal"><a href="#__codelineno-17-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">app</span><span class="p">,</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">,</span><span class="w"> </span><span class="nx">Menu</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcMain</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
</span><a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node:path&#39;</span><span class="p">)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createWindow</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mainWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BrowserWindow</span><span class="p">({</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">    </span><span class="nx">webPreferences</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">      </span><span class="nx">preload</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;preload.js&#39;</span><span class="p">)</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Menu</span><span class="p">.</span><span class="nx">buildFromTemplate</span><span class="p">([</span>
</span><a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="hll"><span class="w">    </span><span class="p">{</span>
</span><a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="hll"><span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="nx">app</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
</span><a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="hll"><span class="w">      </span><span class="nx">submenu</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="hll"><span class="w">        </span><span class="p">{</span>
</span><a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="hll"><span class="w">          </span><span class="nx">click</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;update-counter&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span>
</span><a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="hll"><span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Increment&#39;</span>
</span><a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="hll"><span class="w">        </span><span class="p">},</span>
</span><a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="hll"><span class="w">        </span><span class="p">{</span>
</span><a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="hll"><span class="w">          </span><span class="nx">click</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;update-counter&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">),</span>
</span><a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="hll"><span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Decrement&#39;</span>
</span><a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="hll"><span class="w">        </span><span class="p">}</span>
</span><a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="hll"><span class="w">      </span><span class="p">]</span>
</span><a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="hll"><span class="w">    </span><span class="p">}</span>
</span><a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="hll"><span class="w">  </span><span class="p">])</span>
</span><a id="__codelineno-17-26" name="__codelineno-17-26"></a>
<a id="__codelineno-17-27" name="__codelineno-17-27"></a><span class="hll"><span class="w">  </span><span class="nx">Menu</span><span class="p">.</span><span class="nx">setApplicationMenu</span><span class="p">(</span><span class="nx">menu</span><span class="p">)</span>
</span><a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">  </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
<a id="__codelineno-17-29" name="__codelineno-17-29"></a>
<a id="__codelineno-17-30" name="__codelineno-17-30"></a><span class="w">  </span><span class="c1">// Open the DevTools.</span>
<a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="w">  </span><span class="nx">mainWindow</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">openDevTools</span><span class="p">()</span>
<a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="p">}</span>
<a id="__codelineno-17-33" name="__codelineno-17-33"></a>
<a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-35" name="__codelineno-17-35"></a><span class="hll"><span class="w">  </span><span class="nx">ipcMain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;counter-value&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-17-36" name="__codelineno-17-36"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// will print value to Node console</span>
</span><a id="__codelineno-17-37" name="__codelineno-17-37"></a><span class="hll"><span class="w">  </span><span class="p">})</span>
</span><a id="__codelineno-17-38" name="__codelineno-17-38"></a><span class="w">  </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-17-39" name="__codelineno-17-39"></a>
<a id="__codelineno-17-40" name="__codelineno-17-40"></a><span class="w">  </span><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-41" name="__codelineno-17-41"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">BrowserWindow</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">().</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="nx">createWindow</span><span class="p">()</span>
<a id="__codelineno-17-42" name="__codelineno-17-42"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-17-43" name="__codelineno-17-43"></a><span class="p">})</span>
<a id="__codelineno-17-44" name="__codelineno-17-44"></a>
<a id="__codelineno-17-45" name="__codelineno-17-45"></a><span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-46" name="__codelineno-17-46"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;darwin&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
<a id="__codelineno-17-47" name="__codelineno-17-47"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<h4 id="2-exponer-ipcrendereron-en-el-script-preloadjs">2. Exponer <code>ipcRenderer.on</code> en el script <code>preload.js</code><a class="headerlink" href="#2-exponer-ipcrendereron-en-el-script-preloadjs" title="Permanent link">&para;</a></h4>
<p>Como en los ejemplos anteriores, usamos los m贸dulos <code>contextBridge</code> y <code>ipcRenderer</code> para exponer la funcionalidad IPC en el proceso de renderizado.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">preload.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">contextBridge</span><span class="p">,</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="nx">contextBridge</span><span class="p">.</span><span class="nx">exposeInMainWorld</span><span class="p">(</span><span class="s1">&#39;electronAPI&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="hll"><span class="w">  </span><span class="nx">onUpdateCounter</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">ipcRenderer</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;update-counter&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span>
</span><a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<h4 id="3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario_2">3. Crear el proceso de renderizado en la interfaz de usuario<a class="headerlink" href="#3-crear-el-proceso-de-renderizado-en-la-interfaz-de-usuario_2" title="Permanent link">&para;</a></h4>
<p>Para terminar de unirlo todo, creamos la interfaz HTML que contiene un elemento <code>&lt;span&gt;</code> que se actualizar谩 con el valor del contador.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.html</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>    <span class="cm">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;Content-Security-Policy&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span><span class="p">&gt;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Menu Counter<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="hll">    Current value: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;counter&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="hll">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./renderer.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><a id="__codelineno-19-12" name="__codelineno-19-12"></a>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Finalmente, para hacer que los valores se actualicen en el documento HTML, a帽adimos algunas l铆neas de c贸digo a <code>renderer.js</code>, que aprovecha la API expuesta por el script de precarga.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">renderer.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">)</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="nb">window</span><span class="p">.</span><span class="nx">electronAPI</span><span class="p">.</span><span class="nx">onUpdateCounter</span><span class="p">((</span><span class="nx">_event</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">oldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="nx">counter</span><span class="p">.</span><span class="nx">innerText</span><span class="p">)</span>
</span><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">newValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">oldValue</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">value</span>
</span><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="hll"><span class="w">  </span><span class="nx">counter</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newValue</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="p">})</span>
</code></pre></div></td></tr></table></div>
<p>En el c贸digo anterior, se utiliza <code>window.electronAPI.onUpdateCounter</code> para registrar un <em>listener</em> para el evento <code>update-counter</code> que actualiza el valor del elemento <code>&lt;span&gt;</code>.</p>
<h3 id="patron-4-renderizador-a-renderizador">Patr贸n 4: Renderizador a renderizador<a class="headerlink" href="#patron-4-renderizador-a-renderizador" title="Permanent link">&para;</a></h3>
<p>No existe una forma directa para enviar mensajes estre procesos de renderizado. Para conseguirlo tenemos dos opciones:</p>
<ul>
<li>Usar el proceso principal como intermediario. Esto implica enviar un mensaje desde cada renderer al proceso principal, que reenviar谩 el mensaje al renderer objetivo.</li>
<li>Pasar un <a href="https://www.electronjs.org/docs/latest/tutorial/message-ports"><code>MessagePort</code></a> desde el proceso principal a los dos renderers. Esto permite una comunicaci贸n directa entre los procesos renderizadores despu茅s de una configuraci贸n inicial.</li>
</ul>
<h3 id="serializacion-de-objetos">Serializaci贸n de objetos<a class="headerlink" href="#serializacion-de-objetos" title="Permanent link">&para;</a></h3>
<p>La implementaci贸n IPC utiliza el est谩ndar HTML <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm"><code>Structured Clone Algorithm</code></a> para serializar los objetos pasados entre procesos. Esto significa que los objetos que se env铆an a trav茅s de IPC deben ser compatibles con este algoritmo.</p>
<p>En particular, los objetos DOM (ej. <code>Element</code>, <code>Location</code> y <code>DOMMatrix</code>), objetos Node.js con clases C++ (ej. <code>process.env</code>, miembros de <code>Stream</code>), y objetos Electron con clases C++ (ej. <code>WebContents</code>, <code>BrowserWindow</code> y <code>WebFrame</code>) no son serializables con el algoritmo de clonaci贸n estructurada.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>